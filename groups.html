<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>SlideMaker â€¢ Groups</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer">
  <link rel="stylesheet" href="./css/sidebar.css">
  <link rel="stylesheet" href="./css/chatbot.css">
  <link rel="stylesheet" href="./css/groups.css">
  <script src="./scripts/database.js"></script>
  <style>
    * {
      font-family: 'Trebuchet MS', 'Lucida Grande', 'Lucida Sans Unicode', 'Lucida Sans', Tahoma, sans-serif !important;
    }
    /* Force Font Awesome icons to display */
    i.fas, i.far, i.fal, i.fab, i.fa {
      font-family: "Font Awesome 6 Free" !important;
      font-weight: 900 !important;
      display: inline-block !important;
      visibility: visible !important;
      opacity: 1 !important;
      font-style: normal !important;
      font-variant: normal !important;
      text-rendering: auto !important;
      -webkit-font-smoothing: antialiased !important;
    }
    .section-title i.fas,
    .nav-menu a i.fas,
    .section-action-btn i.fas,
    .sidebar-toggle i.fas {
      font-family: "Font Awesome 6 Free" !important;
      font-weight: 900 !important;
      display: inline-block !important;
      visibility: visible !important;
      opacity: 1 !important;
      font-style: normal !important;
      width: auto !important;
      min-width: 20px !important;
    }
    /* Specific icon fixes */
    .fa-file-powerpoint::before { content: "\f1c4"; }
    .fa-layer-group::before { content: "\f5fd"; }
    .fa-users::before { content: "\f0c0"; }
    .fa-home::before { content: "\f015"; }
    .fa-cog::before { content: "\f013"; }
    .fa-plus::before { content: "\f067"; }
    .fa-bars::before { content: "\f0c9"; }
    .fa-chevron-down::before { content: "\f078"; }
  </style>
</head>
<body>
  <!-- Sidebar Toggle -->
  <button class="sidebar-toggle" id="sidebarToggle" aria-label="Toggle sidebar" onclick="toggleSidebar()">
    <i class="fas fa-bars"></i>
  </button>

  <!-- Sidebar -->
  <nav class="sidebar" id="mainSidebar">
    <div class="logo-container">
      <img src="./CURSOR-Project/public/aramco-digital.O&D.PNG" alt="Aramco Digital Logo" class="sidebar-logo">
    </div>
    
    <div class="sidebar-sections">
      <div class="sidebar-section">
        <div class="section-header" onclick="toggleSection('presentations')">
          <div class="section-title">
            <i class="fas fa-file-powerpoint"></i>
            <span>Presentations</span>
          </div>
          <i class="fas fa-chevron-down section-arrow" id="presentations-arrow"></i>
        </div>
        <div class="section-content" id="presentations-content">
          <button class="section-action-btn" onclick="window.location.href='./Home.html'">
            <i class="fas fa-plus"></i>
            <span>New Presentation</span>
          </button>
        </div>
      </div>

      <div class="sidebar-section">
        <div class="section-header" onclick="toggleSection('templates')">
          <div class="section-title">
            <i class="fas fa-layer-group"></i>
            <span>Templates</span>
          </div>
          <i class="fas fa-chevron-down section-arrow" id="templates-arrow"></i>
        </div>
        <div class="section-content" id="templates-content"></div>
      </div>

      <div class="sidebar-section">
        <div class="section-header active" onclick="toggleSection('groups')">
          <div class="section-title">
            <i class="fas fa-users"></i>
            <span>Groups</span>
          </div>
          <i class="fas fa-chevron-down section-arrow" id="groups-arrow"></i>
        </div>
        <div class="section-content expanded" id="groups-content">
          <button class="section-action-btn" onclick="createNewGroup()">
            <i class="fas fa-plus"></i>
            <span>New Group</span>
          </button>
        </div>
      </div>
    </div>

    <div class="nav-menu">
      <a href="./Home.html">
        <i class="fas fa-home"></i>
        <span>Home</span>
      </a>
      <a href="./settings.html">
        <i class="fas fa-cog"></i>
        <span>Settings</span>
      </a>
    </div>
  </nav>

  <!-- Main Content -->
  <div class="content-area">
    <!-- Top Bar -->
    <header class="topbar">
      <div class="topbar-left">
        <h1 id="groupName">Group Name</h1>
      </div>
      <div class="topbar-right">
        <div class="members-list" id="membersList">
          <!-- Members will be populated here -->
        </div>
        <button class="btn-primary" onclick="showGroupSettings()">
          <i class="fas fa-cog"></i>
          <span>Settings</span>
        </button>
      </div>
    </header>

    <!-- Group Content -->
    <main class="group-content">
      <!-- Slide Strip Section -->
      <section class="slide-strip-section">
        <div class="section-header-bar">
          <h2>Slides</h2>
          <span class="slide-count" id="slideCount">0 slides</span>
        </div>
        
        <div class="group-slide-strip" id="slideStrip">
          <!-- Slides will be populated here -->
        </div>
      </section>

      <!-- Group Info Section -->
      <section class="group-info-section">
        <h2>Group Information</h2>
        <div class="info-grid">
          <div class="info-item">
            <label>Created</label>
            <span id="groupCreated">-</span>
          </div>
          <div class="info-item">
            <label>Members</label>
            <span id="groupMembersCount">0</span>
          </div>
          <div class="info-item">
            <label>Status</label>
            <span id="groupStatus">Active</span>
          </div>
        </div>
      </section>
    </main>
  </div>

  <!-- Slide Management Modal -->
  <div class="modal-backdrop" id="slideModal" style="display: none;">
    <div class="modal-content slide-modal">
      <div class="modal-header">
        <h3>Slide Options</h3>
        <button class="modal-close" onclick="closeSlideModal()">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label>Slide Title</label>
          <input type="text" id="slideTitleInput" placeholder="Enter slide title">
        </div>
        <div class="form-group">
          <label>Assign to Member</label>
          <select id="slideOwnerSelect">
            <option value="">Unassigned</option>
          </select>
        </div>
        <div class="form-group">
          <label>Status</label>
          <select id="slideStatusSelect">
            <option value="in-progress">In Progress</option>
            <option value="completed">Completed</option>
          </select>
        </div>
        <div class="modal-actions">
          <button class="btn-danger" onclick="deleteCurrentSlide()">
            <i class="fas fa-trash"></i>
            <span>Delete Slide</span>
          </button>
          <button class="btn-primary" onclick="saveSlideChanges()">
            <i class="fas fa-save"></i>
            <span>Save Changes</span>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- New Group Modal -->
  <div class="modal-backdrop" id="newGroupModal" style="display: none;" onclick="if(event.target === this) closeNewGroupModal()">
    <div class="modal-content new-group-modal">
      <div class="modal-header">
        <div class="modal-icon-wrapper">
          <i class="fas fa-users"></i>
        </div>
        <h3>Create New Group</h3>
        <p class="modal-subtitle">Start collaborating with your team</p>
        <button class="modal-close" onclick="closeNewGroupModal()" aria-label="Close">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label for="newGroupName">
            <i class="fas fa-tag"></i>
            Group Name
          </label>
          <input 
            type="text" 
            id="newGroupName" 
            placeholder="e.g., Marketing Team, Project Alpha"
            autocomplete="off"
            autofocus
            onkeydown="if(event.key === 'Enter') createGroup()"
          >
          <div class="input-hint">Choose a descriptive name for your group</div>
        </div>
        <div class="modal-actions">
          <button class="btn-secondary" onclick="closeNewGroupModal()">
            <i class="fas fa-times"></i>
            <span>Cancel</span>
          </button>
          <button class="btn-primary" onclick="createGroup()">
            <i class="fas fa-plus-circle"></i>
            <span>Create Group</span>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="./scripts/sidebar.js"></script>
  <script src="./scripts/groups.js"></script>
  <script src="./scripts/chatbot.js"></script>
  <script>
    // Verify Font Awesome is loaded
    document.addEventListener('DOMContentLoaded', function() {
      // Check if Font Awesome is loaded
      const testIcon = document.createElement('i');
      testIcon.className = 'fas fa-check';
      testIcon.style.position = 'absolute';
      testIcon.style.left = '-9999px';
      document.body.appendChild(testIcon);
      
      const computedStyle = window.getComputedStyle(testIcon, ':before');
      const fontFamily = computedStyle.getPropertyValue('font-family');
      
      if (!fontFamily.includes('Font Awesome')) {
        console.warn('Font Awesome may not be loaded correctly');
        // Try to reload Font Awesome
        const link = document.createElement('link');
        link.rel = 'stylesheet';
        link.href = 'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css';
        link.integrity = 'sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==';
        link.crossOrigin = 'anonymous';
        link.referrerPolicy = 'no-referrer';
        document.head.appendChild(link);
      }
      
      // Force all icons to be visible
      const allIcons = document.querySelectorAll('i.fas, i.far, i.fal, i.fab');
      allIcons.forEach(icon => {
        icon.style.display = 'inline-block';
        icon.style.visibility = 'visible';
        icon.style.opacity = '1';
        icon.style.fontFamily = '"Font Awesome 6 Free"';
        icon.style.fontWeight = '900';
      });
    });
  </script>
</body>
</html>
