function savePresentation() {
  const title = document.querySelector(".title-box").innerText || "Untitled";
  const content = document.querySelector(".text-box").innerText || "";
  const saved = JSON.parse(localStorage.getItem("recentPresentations")) || [];

  saved.push({
    title: title,
    date: new Date().toISOString().split("T")[0],
    content: content
  });

  localStorage.setItem("recentPresentations", JSON.stringify(saved));
  alert("Presentation saved!");
}

{
  "page": "Editor",
  "description": "Slide editor with toolbar for text formatting and alignment.",
  "layout": {
    "topBar": {
      "buttons": [
        { "label": "Back", "icon": "◀", "color": "blue", "action": "undoLastAction()" },
        { "label": "Forward", "icon": "▶", "color": "blue", "action": "redoLastAction()" },
        { "label": "New Slide", "color": "blue", "action": "new_slide" },
        { "label": "Duplicate", "color": "gray", "action": "duplicate_slide" },
        { "label": "Delete", "color": "red", "action": "delete_slide" },
        { "label": "Reset", "color": "lightgray", "action": "reset_slides" },
        { "label": "Save", "color": "green", "action": "save_presentation" },
        { "label": "Return Home", "color": "emerald", "align": "right", "action": "go_home" }
      ]
    },
    
    "keyboardShortcuts": {
      "undo": ["Command+Z", "Ctrl+Z"],
      "redo": ["Command+Shift+Z", "Ctrl+Shift+Z"]
    },

    "toolbar": {
      "type": "text_tools",
      "buttons": [
        { "icon": "bold", "action": "toggleBold" },
        { "icon": "italic", "action": "toggleItalic" },
        { "icon": "underline", "action": "toggleUnderline" },
        { "icon": "strike", "action": "toggleStrike" },
        { "icon": "superscript", "action": "toggleSuperscript" },
        { "icon": "subscript", "action": "toggleSubscript" },
        { "icon": "fontSize", "type": "number", "min": 8, "max": 72, "step": 2, "default": 16, "action": "changeFontSize" },
        { "icon": "fontColor", "type": "colorPicker", "action": "changeFontColor" },
        { "icon": "highlight", "type": "colorPicker", "action": "changeBackgroundColor" },
        { "icon": "alignLeft", "action": "alignLeft" },
        { "icon": "alignCenter", "action": "alignCenter" },
        { "icon": "alignRight", "action": "alignRight" },
        { "icon": "alignJustify", "action": "alignJustify" },
        { "icon": "unorderedList", "action": "insertUnorderedList" },
        { "icon": "orderedList", "action": "insertOrderedList" }
      ]
    },

    "slideArea": {
      "elements": [
        {
          "id": "titleBox",
          "type": "editable",
          "placeholder": "Click to add title",
          "defaultText": "Title",
          "styles": { "fontSize": "28px", "fontWeight": "bold", "marginBottom": "10px", "color": "#000000" }
        },
        {
          "id": "textBox",
          "type": "editable",
          "placeholder": "Click to add text",
          "styles": { "fontSize": "16px", "minHeight": "250px", "border": "1px dashed #ccc" },
          "deletable": true,
          "deleteKey": ["Delete", "Backspace"]
        }
      ]
    },

    "slidePreview": {
      "hoverButtons": [
        { "name": "New Slide", "action": "createNewSlide()" },
        { "name": "Duplicate", "action": "duplicateCurrentSlide()" }
      ],
      "position": "below",
      "visibility": "onHover"
    }
  },

  "interactions": {
    "actions": [
      "toggleBold → toggles font-weight:bold on selected text",
      "toggleItalic → toggles font-style:italic",
      "toggleUnderline → toggles underline",
      "changeFontSize → applies selected font size to highlighted text",
      "changeFontColor → applies selected text color",
      "alignLeft / alignCenter / alignRight / alignJustify → changes paragraph alignment",
      "insertUnorderedList / insertOrderedList → inserts list format",
      "save_presentation → saves current slide content into localStorage under user account"
    ]
  },

  "style": {
    "theme": {
      "background": "#f7f8fa",
      "card": "white",
      "toolbar": {
        "background": "#f0f3f5",
        "border": "1px solid #d8e0e3",
        "shadow": "0 2px 6px rgba(0,0,0,0.05)"
      },
      "activeButton": {
        "background": "#2ecc71",
        "color": "#fff"
      }
    }
  }
}

function saveAsFile() {
  const title = document.querySelector(".title-box").innerText || "Untitled";
  const content = document.querySelector(".text-box").innerHTML || "";

  const fileType = prompt("Enter file type: pdf or pptx").toLowerCase();

  if (fileType === "pdf") {
    const blob = new Blob([content], { type: "application/pdf" });
    const url = URL.createObjectURL(blob);
    const a = document.createElement("a");
    a.href = url;
    a.download = `${title}.pdf`;
    a.click();
  } else if (fileType === "pptx") {
    const blob = new Blob([content], { type: "application/vnd.openxmlformats-officedocument.presentationml.presentation" });
    const url = URL.createObjectURL(blob);
    const a = document.createElement("a");
    a.href = url;
    a.download = `${title}.pptx`;
    a.click();
  } else {
    alert("Invalid format. Use 'pdf' or 'pptx'.");
  }
}

function changeFontSize(size) {
  document.execCommand("fontSize", false, "7"); // placeholder
  const elements = document.getElementsByTagName("font");
  for (let i = 0; i < elements.length; i++) {
    if (elements[i].size === "7") {
      elements[i].removeAttribute("size");
      elements[i].style.fontSize = size + "px";
    }
  }
}
{
  "page": "editor",
  "slideTitle": {
    "defaultText": "Title",
    "textColor": "#000000"
  },
  "textToolbar": {
    "fontSizeSelector": {
      "type": "number",
      "min": 8,
      "max": 72,
      "step": 2,
      "default": 16
    },
    "removeOptions": ["Normal", "Small", "Large"]
  }
}
